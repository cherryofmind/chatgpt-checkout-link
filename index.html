<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<title>Оплата ChatGPT — ссылка Stripe</title>
<style>
  body { font-family: system-ui, sans-serif; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; background:#0d1117; color:#f0f6fc; }
  .box { text-align:center; max-width:600px; }
  h1 { font-size:22px; margin-bottom:16px; }
  p { margin:12px 0; line-height:1.5; }
  a.btn { display:inline-block; font-size:18px; font-weight:600; padding:16px 24px; border-radius:12px; background:#2da44e; color:#fff; text-decoration:none; }
  a.btn:hover { background:#2c974b; }
  code { background:#161b22; padding:2px 6px; border-radius:6px; }
</style>
</head>
<body>
  <div class="box">
    <h1>Ссылка на оплату ChatGPT (старый Stripe)</h1>
    <p>➊ Перетащите кнопку ниже на панель закладок:</p>
    <p>
      <a class="btn" href="javascript:(async()=>{try{const s=await fetch('/api/auth/session',{credentials:'include'});const j=await s.json();if(!j?.accessToken){alert('Зайдите на chatgpt.com под своим аккаунтом и попробуйте снова');return}const a={plan_name:'chatgptplusplan',billing_details:{country:'US',currency:'USD'},promo_code:null,checkout_ui_mode:'redirect'};const r=await fetch('https://chatgpt.com/backend-api/payments/checkout',{method:'POST',credentials:'include',headers:{'Content-Type':'application/json','authorization':`Bearer ${j.accessToken}`},body:JSON.stringify(a)});const d=await r.json();if(!d?.url){alert('Не удалось получить ссылку. Возможно включён новый метод оплаты.');return}prompt('Скопируйте ссылку на оплату (старого образца):',d.url);}catch(e){alert('Ошибка: '+e.message)}})();">Получить ссылку Stripe</a>
    </p>
    <p>➋ Откройте <a href="https://chatgpt.com" target="_blank" style="color:#58a6ff">chatgpt.com</a> и войдите в аккаунт.</p>
    <p>➌ Нажмите сохранённую закладку. Появится окно со ссылкой вида <code>https://checkout.stripe.com/...</code>.</p>
    <p>➍ Скопируйте ссылку и отправьте её нам.</p>
  </div>
</body>
</html>
